(window["webpackJsonpreact-kabzda-1"]=window["webpackJsonpreact-kabzda-1"]||[]).push([[0],{133:function(e,t,n){},134:function(e,t,n){e.exports={currentPage:"Users_currentPage__2C6PQ",paginationIem:"Users_paginationIem__2k1g7",userAva:"Users_userAva__1IXUy"}},135:function(e,t,n){e.exports=n.p+"static/media/preloader.42012b3b.gif"},136:function(e,t,n){e.exports={userAva:"UserItem_userAva__2LKPX"}},138:function(e,t,n){e.exports={profileDescription:"ProfileInfo_profileDescription__2hYhW"}},139:function(e,t,n){e.exports={item:"Post_item__2BGeQ"}},14:function(e,t,n){e.exports={nav:"Navbar_nav__2JAyT",item:"Navbar_item__mW7wb",active:"Navbar_active__1rBCx",navbarFriends:"Navbar_navbarFriends__1cWPT",navbarFriendsList:"Navbar_navbarFriendsList__3a9KR"}},167:function(e,t,n){e.exports=n(294)},168:function(e,t,n){},21:function(e,t,n){e.exports={formControl:"FormControl_formControl__EMft-",error:"FormControl_error__1HGmr",formError:"FormControl_formError__ZN-_q"}},251:function(e,t,n){},294:function(e,t,n){"use strict";n.r(t);n(168),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var a=n(6),r=n(8),o=n.n(r),c=n(13),i=n(39),s=n(19),l=n(128),u=n.n(l).a.create({withCredentials:!0,headers:{"API-KEY":"5995d704-6605-4021-be3a-75799fb9ae6d"},baseURL:"https://social-network.samuraijs.com/api/1.0/"}),m={getUsers:function(e,t){return u.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},follow:function(e){return u.post("follow/".concat(e)).then((function(e){return e.data}))},unFollow:function(e){return u.delete("follow/".concat(e)).then((function(e){return e.data}))}},p=function(){return u.get("auth/me").then((function(e){return e.data}))},f=function(e,t,n,a){return u.post("auth/login",{email:e,password:t,rememberMe:n,captcha:a}).then((function(e){return e.data}))},d=function(){return u.delete("auth/login").then((function(e){return e.data}))},g=function(){return u.get("security/get-captcha-url").then((function(e){return e.data}))},v=function(e){return u.get("profile/".concat(e)).then((function(e){return e.data}))},b=function(e){return u.get("profile/status/".concat(e)).then((function(e){return e.data}))},E=function(e){return u.put("profile/status",{status:e}).then((function(e){return e.data}))},h=function(e){return u.put("profile",e).then((function(e){return e.data}))},O=function(e){var t=new FormData;return t.append("image",e),u.put("profile/photo",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){return e.data}))},y=n(30);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(n,!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P={profile:null,postsData:[{id:1,postText:"First post",likesCount:5},{id:2,postText:"Second post",likesCount:3},{id:3,postText:"some text",likesCount:25},{id:4,postText:"more some text",likesCount:1}],status:""},_=function(e){return{type:"Set_User_Profile",profile:e}},S=function(e){return{type:"Set_User_Status",status:e}},k=function(e){return function(){var t=Object(c.a)(o.a.mark((function t(n){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v(e);case 2:a=t.sent,n(_(a));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_POST":var n=e.postsData.length+1,a={id:n,postText:t.newPostText,likesCount:0};return j({},e,{postsData:[].concat(Object(i.a)(e.postsData),[a])});case"Set_User_Profile":return j({},e,{profile:t.profile});case"Set_User_Status":return j({},e,{status:t.status});case"DELETE_POST":return j({},e,{postsData:e.postsData.filter((function(e){return e.id!==t.postId}))});case"SAVE_PHOTO_SUCCSESS":return j({},e,{profile:j({},e.profile,{photos:t.photos})});default:return e}};function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(n,!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var C={messagesData:[{id:1,messageText:"Hello! How are you?"},{id:2,messageText:"I'm develope my own social network"},{id:3,messageText:"Wow! It's amazing!"},{id:4,messageText:"Yes!"}],dialogsData:[{id:1,name:"User 1",avaUrl:"http://pikchyriki.net/avatar/prikolnye/100/12.jpg"},{id:2,name:"User 2",avaUrl:"http://pikchyriki.net/avatar/prikolnye/100/12.jpg"},{id:3,name:"User 3",avaUrl:"http://pikchyriki.net/avatar/prikolnye/100/12.jpg"},{id:4,name:"User 4",avaUrl:"http://pikchyriki.net/avatar/prikolnye/100/12.jpg"},{id:5,name:"User 5",avaUrl:"http://pikchyriki.net/avatar/prikolnye/100/12.jpg"},{id:6,name:"User 6",avaUrl:"http://pikchyriki.net/avatar/prikolnye/100/12.jpg"},{id:7,name:"User 7",avaUrl:"http://pikchyriki.net/avatar/prikolnye/100/12.jpg"}]},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"sendMessage":var n=e.messagesData.length+1,a={id:n,messageText:t.newMessageText};return U({},e,{messagesData:[].concat(Object(i.a)(e.messagesData),[a])});default:return e}},D={navbarFriends:[{id:1,name:"Friend 1",avaUrl:"http://www.alluserpics.com/data/thumbnails/17/03178.jpg"},{id:2,name:"Friend 2",avaUrl:"http://www.alluserpics.com/data/thumbnails/17/03172.jpg"},{id:3,name:"Friend 3",avaUrl:"http://www.alluserpics.com/data/thumbnails/17/03102.jpg"}]},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D;arguments.length>1&&arguments[1];return e};function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var A=function(e,t,n,a){return e.map((function(e){return e[t]===n?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(n,!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{},a):e}))};function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(n,!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var R={users:[],pageSize:10,totalCount:0,currentPage:1,isFetching:!0,isFollowingProgress:[]},z=function(e){return{type:"FOLLOW",userId:e}},G=function(e){return{type:"UNFOLLOW",userId:e}},H=function(e){return{type:"SETUSERS",users:e}},W=function(e){return{type:"TOGGLEISFETCHING",isFetching:e}},J=function(e,t){return{type:"TOGGLE_IS_FOLLOWING_PROGRESS",userId:t,isFetching:e}},B=function(){var e=Object(c.a)(o.a.mark((function e(t,n,a,r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(J(!0,r)),e.next=3,a(r);case 3:0===e.sent.resultCode&&(t(n(r)),t(J(!1,r)));case 6:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FOLLOW":return M({},e,{users:A(e.users,"id",t.userId,{followed:!0})});case"UNFOLLOW":return M({},e,{users:A(e.users,"id",t.userId,{followed:!1})});case"SETUSERS":return M({},e,{users:Object(i.a)(t.users)});case"SETUSERSCOUNT":return M({},e,{totalCount:t.totalCount});case"SETCURRENTPAGE":return M({},e,{currentPage:t.currentPage});case"TOGGLEISFETCHING":return M({},e,{isFetching:t.isFetching});case"TOGGLE_IS_FOLLOWING_PROGRESS":return M({},e,{isFollowingProgress:t.isFetching?[].concat(Object(i.a)(e.isFollowingProgress),[t.userId]):e.isFollowingProgress.filter((function(e){return e!==t.userId}))});default:return e}};function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(n,!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Z={isFetching:!1,userId:null,email:"",userName:"",isAuth:null,captchaURL:null},K=function(e,t,n,a){return{type:"Set_Users_Data",data:{userId:e,email:t,userName:n,isAuth:a}}},X=function(e){return{type:"SET_CAPTCHA_URL_SUCCSESS",data:e}},Q=function(){return function(){var e=Object(c.a)(o.a.mark((function e(t){var n,a,r,c,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p();case 2:0===(n=e.sent).resultCode&&(a=n.data,r=a.id,c=a.email,i=a.login,t(K(r,c,i,!0)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},$=function(){return function(){var e=Object(c.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d();case 2:0===e.sent.resultCode&&t(K(null,null,null,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"Set_Users_Data":return Y({},e,{},t.data);case"SET_LOGINED_USER_DATA":return Y({},e,{userId:t.userId,isAuth:!0});case"SET_CAPTCHA_URL_SUCCSESS":return Y({},e,{captchaURL:t.data});default:return e}},te=n(129),ne=n(127);function ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ae(n,!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ae(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var oe={initialized:!1},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INITIALIZED_SUCSESS":return re({},e,{initialized:!0});default:return e}},ie=Object(a.c)({profilePage:F,dialogsPage:x,navbarFriends:I,usersPage:q,auth:ee,form:ne.a,appState:ce}),se=Object(a.e)(ie,Object(a.a)(te.a));window.store=se;var le=se,ue=n(0),me=n.n(ue),pe=n(62),fe=n.n(pe),de=n(25),ge=n(26),ve=n(28),be=n(27),Ee=n(29),he=(n(251),n(10)),Oe=n(14),ye=n.n(Oe),we=n(67),je=n.n(we),Pe=n(89),_e=n.n(Pe),Se=function(e){return me.a.createElement("div",{className:_e.a.navbarFriendItem},me.a.createElement("div",null,me.a.createElement("img",{className:_e.a.navbarFriendAva,src:e.state.avaUrl,alt:"avka"})),me.a.createElement("div",null,e.state.name))},ke=function(e){var t=e.state.map((function(e){return me.a.createElement(Se,{state:e,key:e.id})}));return me.a.createElement("div",{className:je.a.navbarFriends},me.a.createElement("h3",{className:je.a.navbarFriendsHeader},"Friends"),me.a.createElement("div",{className:je.a.navbarFriendsList},t))},Fe=n(9),Ne=Object(Fe.b)((function(e){return{state:e.navbarFriends.navbarFriends}}),(function(e){return{}}))(ke),Ue=function(e){return me.a.createElement("nav",{className:ye.a.nav},me.a.createElement("div",{className:"".concat(ye.a.item," ").concat(ye.a.active)},me.a.createElement(he.b,{to:"/profile",activeClassName:ye.a.active},"Profile")),me.a.createElement("div",{className:ye.a.item},me.a.createElement(he.b,{to:"/dialogs",activeClassName:ye.a.active},"Dialogs")),me.a.createElement("div",{className:ye.a.item},me.a.createElement(he.b,{to:"/news",activeClassName:ye.a.active},"News")),me.a.createElement("div",{className:ye.a.item},me.a.createElement(he.b,{to:"/music",activeClassName:ye.a.active},"Music")),me.a.createElement("div",{className:ye.a.item},me.a.createElement(he.b,{to:"/settings",activeClassName:ye.a.active},"Settings")),me.a.createElement("div",{className:ye.a.item},me.a.createElement(he.b,{to:"/users",activeClassName:ye.a.active},"Users")),me.a.createElement(Ne,null))},Ce=n(36),xe=n.n(Ce),De=n(68),Ie=n.n(De),Te=function(e){var t="/dialogs/"+e.id;return me.a.createElement("div",{className:Ie.a.item},me.a.createElement("img",{className:Ie.a.dialogItemAva,src:e.avaUrl,alt:"ava"}),me.a.createElement(he.b,{to:t,activeClassName:Ie.a.active},e.name))},Ae=n(133),Le=n.n(Ae),Me=function(e){return me.a.createElement("div",{className:Le.a.message},"".concat(e.messageText))},Re=n(35),ze=n(125),Ge=n(126),He=n(69),We=n(21),Je=n.n(We),Be=function(e){var t=e.input,n=e.meta,a=Object(He.a)(e,["input","meta"]),r=n.touched&&n.error;return me.a.createElement("div",{className:"".concat(Je.a.formControl," ").concat(r?Je.a.error:"")},me.a.createElement("div",null,me.a.createElement("textarea",Object.assign({},t,a))),me.a.createElement("div",null,r&&me.a.createElement("span",null,n.error)))},qe=function(e){var t=e.input,n=e.meta,a=Object(He.a)(e,["input","meta"]),r=n.touched&&n.error;return me.a.createElement("div",{className:"".concat(Je.a.formControl," ").concat(r?Je.a.error:"")},me.a.createElement("div",null,me.a.createElement("input",Object.assign({},t,a))),me.a.createElement("div",null,r&&me.a.createElement("span",null,n.error)))},Ve=function(e){if(!e)return"Field is required"},Ye=function(e){return function(t){if(t&&t.length>e)return"Max length is ".concat(e," symbols")}},Ze=Ye(30),Ke=Object(Ge.a)({form:"newMessageForm"})((function(e){return me.a.createElement("div",{className:xe.a.sendMessage},me.a.createElement("form",{onSubmit:e.handleSubmit},me.a.createElement("div",{className:xe.a.sendMessageTextarea},me.a.createElement(ze.a,{placeholder:"new message",name:"newMessageText",component:Be,type:"text",validate:[Ve,Ze]})),me.a.createElement("div",null,me.a.createElement("button",{type:"submit"},"Send message"))))})),Xe=function(e){var t=e.dialogsData.map((function(e){return me.a.createElement(Te,{name:e.name,id:e.id,avaUrl:e.avaUrl,key:e.id})})),n=e.messagesData.map((function(e){return me.a.createElement(Me,{messageText:e.messageText,key:e.id})}));if(!e.isAuth)return me.a.createElement(Re.a,{to:"/login"});return me.a.createElement("div",{className:xe.a.dialogs},me.a.createElement("div",{className:xe.a.dialogsList},me.a.createElement("span",{className:xe.a.DialogsHeader},"Dialogs list"),t),me.a.createElement("div",{className:xe.a.messages},n,me.a.createElement(Ke,{onSubmit:function(t){e.onSendMessage(t.newMessageText)}})))},Qe=function(e){return{profile:e.profilePage.profile,isAuth:e.auth.isAuth}},$e=function(e){var t=function(t){function n(){return Object(de.a)(this,n),Object(ve.a)(this,Object(be.a)(n).apply(this,arguments))}return Object(Ee.a)(n,t),Object(ge.a)(n,[{key:"render",value:function(){return this.props.isAuth?me.a.createElement(e,this.props):me.a.createElement(Re.a,{to:"/login"})}}]),n}(me.a.Component);return Object(Fe.b)(Qe,{})(t)},et=Object(a.d)(Object(Fe.b)((function(e){return{dialogsData:e.dialogsPage.dialogsData,messagesData:e.dialogsPage.messagesData,newMessageText:e.dialogsPage.newMessageText}}),(function(e){return{onSendMessage:function(t){e(function(e){return{type:"sendMessage",newMessageText:e}}(t))}}})),$e)(Xe),tt=function(e){return me.a.createElement("div",null,"Music")},nt=function(e){return me.a.createElement("div",null,"News")},at=function(e){return me.a.createElement("div",null,"Settings")},rt=n(134),ot=n.n(rt),ct=n(135),it=n.n(ct),st=function(e){return me.a.createElement("img",{src:it.a,alt:"preloader"})},lt=n(40),ut=n(93),mt=n.n(ut),pt=function(e){for(var t=e.totalCount,n=e.pageSize,a=e.currentPage,r=e.setCurrentPage,o=e.getUsersFromPage,c=e.portionSize,i=void 0===c?10:c,s=Math.ceil(t/n),l=[],u=1;u<=s;u++)l.push(u);var m=Math.ceil(t/i),p=Object(ue.useState)(1),f=Object(lt.a)(p,2),d=f[0],g=f[1],v=(d-1)*i+1,b=d*i;return me.a.createElement("div",null,d>1?me.a.createElement("button",{onClick:function(){return g(d-1)}},"Prev"):"",l.filter((function(e){return e>=v&&e<=b})).map((function(e){return me.a.createElement("span",{key:e,onClick:function(){r(e),o(e)},className:a===e?mt.a.currentPage:mt.a.paginationIem},e)})),m>d?me.a.createElement("button",{onClick:function(){return g(d+1)}},"Next"):"")},ft=n(136),dt=n.n(ft),gt=function(e){var t=e.user,n=e.isFollowingProgress,a=e.follow,r=e.unFollow;return me.a.createElement("div",null,me.a.createElement("div",null,me.a.createElement(he.b,{to:"/profile/".concat(t.id)},me.a.createElement("img",{className:dt.a.userAva,src:null!=t.photos.small?t.photos.small:"http://www.alluserpics.com/data/thumbnails/17/03178.jpg",alt:"my ava"})),t.followed?me.a.createElement("button",{disabled:n.some((function(e){return e===t.id})),onClick:function(){r(t.id)}},"Unfollow"):me.a.createElement("button",{disabled:n.some((function(e){return e===t.id})),onClick:function(){a(t.id)}},"Follow")),me.a.createElement("div",null,me.a.createElement("span",null,t.name),me.a.createElement("div",null,me.a.createElement("span",null,t.status))))},vt=function(e){return me.a.createElement("div",null,e.isFetching?me.a.createElement(st,null):null,me.a.createElement("div",null,me.a.createElement(pt,{totalCount:e.totalCount,pageSize:e.pageSize,currentPage:e.currentPage,setCurrentPage:e.setCurrentPage,getUsersFromPage:e.getUsersFromPage})),me.a.createElement("div",{className:ot.a.usersList},me.a.createElement("div",null,e.users.map((function(t){return me.a.createElement(gt,{user:t,isFollowingProgress:e.isFollowingProgress,follow:e.follow,unFollow:e.unFollow,key:t.id})})))))},bt=n(137),Et=Object(bt.a)((function(e){return e.usersPage.users}),(function(e){return e.filter((function(e){return!0}))})),ht=function(e){return e.usersPage.pageSize},Ot=function(e){return e.usersPage.totalCount},yt=function(e){return e.usersPage.currentPage},wt=function(e){return e.usersPage.isFetching},jt=function(e){return e.usersPage.isFollowingProgress},Pt=function(e){function t(){return Object(de.a)(this,t),Object(ve.a)(this,Object(be.a)(t).apply(this,arguments))}return Object(Ee.a)(t,e),Object(ge.a)(t,[{key:"componentDidMount",value:function(){this.props.requestUsers(this.props.currentPage,this.props.pageSize)}},{key:"getUsersFromPage",value:function(e){this.props.getUsersFromPage(e,this.props.pageSize)}},{key:"render",value:function(){return me.a.createElement(vt,{setCurrentPage:this.props.setCurrentPage,getUsersFromPage:this.getUsersFromPage.bind(this),currentPage:this.props.currentPage,users:this.props.users,unFollow:this.props.unFollow,follow:this.props.follow,isFetching:this.props.isFetching,isFollowingProgress:this.props.isFollowingProgress,totalCount:this.props.totalCount,pageSize:this.props.pageSize})}}]),t}(me.a.Component),_t=Object(a.d)(Object(Fe.b)((function(e){return{users:Et(e),pageSize:ht(e),totalCount:Ot(e),currentPage:yt(e),isFetching:wt(e),isFollowingProgress:jt(e)}}),{follow:function(e){return function(t){B(t,z,m.follow.bind(m),e)}},unFollow:function(e){return function(t){B(t,G,m.unFollow.bind(m),e)}},setCurrentPage:function(e){return{type:"SETCURRENTPAGE",currentPage:e}},requestUsers:function(e,t){return function(){var n=Object(c.a)(o.a.mark((function n(a){var r;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a(W(!0)),n.next=3,m.getUsers(e,t);case 3:r=n.sent,a(W(!1)),a(H(r.items)),a({type:"SETUSERSCOUNT",totalCount:r.totalCount});case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},getUsersFromPage:function(e,t){return function(){var n=Object(c.a)(o.a.mark((function n(a){var r;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a(W(!0)),n.next=3,m.getUsers(e,t);case 3:r=n.sent,a(W(!1)),a(H(r.items));case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}}),$e)(Pt),St=n(138),kt=n.n(St),Ft=function(e){var t=Object(ue.useState)(!1),n=Object(lt.a)(t,2),a=n[0],r=n[1],o=Object(ue.useState)(e.status),c=Object(lt.a)(o,2),i=c[0],s=c[1];return Object(ue.useEffect)((function(){s(e.status)}),[e.status]),me.a.createElement("div",null,!a&&me.a.createElement("div",null,me.a.createElement("span",{onDoubleClick:function(){r(!0)}},"My status: ",i)),a&&me.a.createElement("div",null,me.a.createElement("input",{onChange:function(e){s(e.currentTarget.value)},type:"text",value:i,onBlur:function(t){r(!1),e.updateUserStatus(i)},autoFocus:!0})))},Nt=Object(Ge.a)({form:"profileDataForm"})((function(e){var t=e.handleSubmit,n=e.error,a=e.initialValues;return me.a.createElement("form",{onSubmit:t},me.a.createElement("div",null,me.a.createElement("button",{type:"submit"},me.a.createElement("b",null,"Save profile"))),n?me.a.createElement("div",{className:Je.a.formError},me.a.createElement("span",null,n)):"",me.a.createElement("div",null,me.a.createElement("span",null,me.a.createElement("b",null,"Name:")," "),me.a.createElement(ze.a,{name:"fullName",component:qe,type:"text",validate:[Ve]})),me.a.createElement("div",null,me.a.createElement("span",null,me.a.createElement("b",null,"About me:")," "),me.a.createElement(ze.a,{name:"aboutMe",component:Be,type:"text"})),me.a.createElement("div",null,me.a.createElement("div",null,me.a.createElement("span",null,me.a.createElement("b",null,"Looking for a job:")," "),me.a.createElement(ze.a,{name:"lookingForAJob",component:qe,type:"checkbox"})),me.a.createElement("div",null,me.a.createElement("span",null,me.a.createElement("b",null,"Looking for a job description:")," "),me.a.createElement(ze.a,{name:"lookingForAJobDescription",component:Be,type:"text"}))),me.a.createElement("div",null,me.a.createElement("span",null,"Contacts: "),Object.keys(a.contacts).map((function(e){return me.a.createElement("div",{key:e},me.a.createElement("span",null,me.a.createElement("b",null,e,": ")),me.a.createElement(ze.a,{name:"contacts.".concat(e),component:qe,type:"text"}))}))))})),Ut=function(e){var t=e.contactName,n=e.contactValue;return me.a.createElement("div",null,me.a.createElement("span",null,me.a.createElement("b",null,t," - ")),me.a.createElement("span",null,n||"none"))},Ct=function(e){var t=e.profile,n=e.isOwner,a=e.goToEditMode;return me.a.createElement("div",null,n?me.a.createElement("div",null,me.a.createElement("button",{onClick:a},"Edit")):"",me.a.createElement("div",null,me.a.createElement("span",null,me.a.createElement("b",null,"Name:")," ",t.fullName)),me.a.createElement("div",null,me.a.createElement("span",null,me.a.createElement("b",null,"About me:")," "),me.a.createElement("span",null,t.aboutMe)),me.a.createElement("div",null,me.a.createElement("div",null,me.a.createElement("span",null,me.a.createElement("b",null,"Looking for a job:")," "),me.a.createElement("span",null,t.lookingForAJob?"yes":"no")),t.lookingForAJob?me.a.createElement("div",null,me.a.createElement("span",null,me.a.createElement("b",null,"Looking for a job description:")," "),me.a.createElement("span",null,t.lookingForAJobDescription)):""),me.a.createElement("div",null,me.a.createElement("span",null,"Contacts: "),Object.keys(t.contacts).map((function(e){return me.a.createElement(Ut,{key:e,contactName:e,contactValue:t.contacts[e]})}))))},xt=function(e){var t=Object(ue.useState)(!1),n=Object(lt.a)(t,2),a=n[0],r=n[1];if(!e.profile)return me.a.createElement(st,null);var o=me.a.createRef();return me.a.createElement("div",null,me.a.createElement("div",{className:kt.a.profileDescription},me.a.createElement(Ft,{status:e.status,updateUserStatus:e.updateUserStatus}),me.a.createElement("div",null,me.a.createElement("div",null,me.a.createElement("img",{src:e.profile.photos.large?e.profile.photos.large:"http://www.alluserpics.com/data/thumbnails/17/03178.jpg",alt:"ava-large"})),e.isOwner?me.a.createElement("div",null,me.a.createElement("input",{type:"file",style:{display:"none"},onChange:function(t){t.target.files.length&&e.saveFoto(t.target.files[0])},name:"changeAva",ref:o,id:"changeAva"}),me.a.createElement("span",null,"Change avatar: "),me.a.createElement("button",{onClick:function(){return o.current.click()}},"Select new ava")):""),a?me.a.createElement(Nt,{initialValues:e.profile,onSubmit:function(t){e.updateUserProfile(t).then((function(){r(!1)}))}}):me.a.createElement(Ct,{profile:e.profile,goToEditMode:function(){r(!0)},isOwner:e.isOwner})))},Dt=n(94),It=n.n(Dt),Tt=n(139),At=n.n(Tt),Lt=function(e){return me.a.createElement("div",{className:At.a.item},e.message,me.a.createElement("div",null,me.a.createElement("span",null,e.likesCount," likes")))},Mt=Ye(10),Rt=Object(Ge.a)({form:"newPostForm"})((function(e){return me.a.createElement("div",null,me.a.createElement("form",{onSubmit:e.handleSubmit},me.a.createElement("div",null,me.a.createElement(ze.a,{validate:[Ve,Mt],placeholder:"new post",name:"newPostText",component:Be,type:"text"})),me.a.createElement("div",null,me.a.createElement("button",{type:"submit"},"Add post"))))})),zt=function(e){var t=e.postsData.map((function(e){return me.a.createElement(Lt,{message:e.postText,likesCount:e.likesCount,key:e.id})}));return me.a.createElement("div",{className:It.a.myPosts},"my posts",me.a.createElement("div",null,me.a.createElement(Rt,{onSubmit:function(t){console.log("formData - ".concat(JSON.stringify(t))),e.addPost(t.newPostText)}})),me.a.createElement("div",{className:It.a.posts},t))},Gt=Object(Fe.b)((function(e){return{postsData:e.profilePage.postsData,newPostText:e.profilePage.newPostText}}),{addPost:function(e){return function(t){t(function(e){return{type:"ADD_POST",newPostText:e}}(e))}}})(zt),Ht=function(e){return me.a.createElement("div",null,me.a.createElement(xt,e),me.a.createElement(Gt,null))},Wt=function(e){return e.auth.userId},Jt=function(e){return e.profilePage.profile},Bt=function(e){return e.profilePage.status},qt=function(e){function t(){return Object(de.a)(this,t),Object(ve.a)(this,Object(be.a)(t).apply(this,arguments))}return Object(Ee.a)(t,e),Object(ge.a)(t,[{key:"refreshUserProfile",value:function(){var e=this.props.match.params.userId;e&&"undefined"!==e||(e=this.props.authorizedUserId);var t=+e===+this.props.authorizedUserId;this.isOwner=t,this.props.getUserProfile(e),this.props.getUserStatus(e)}},{key:"componentDidMount",value:function(){this.refreshUserProfile()}},{key:"componentDidUpdate",value:function(e,t){this.props.match.params.userId!==e.match.params.userId&&this.refreshUserProfile()}},{key:"render",value:function(){return me.a.createElement(Ht,Object.assign({},this.props,{isOwner:this.isOwner}))}}]),t}(me.a.Component),Vt=Object(a.d)(Object(Fe.b)((function(e){return{profile:Jt(e),status:Bt(e),authorizedUserId:Wt(e)}}),{getUserProfile:k,getUserStatus:function(e){return function(){var t=Object(c.a)(o.a.mark((function t(n){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b(e);case 2:a=t.sent,n(S(a));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},updateUserStatus:function(e){return function(){var t=Object(c.a)(o.a.mark((function t(n){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E(e);case 2:0===(a=t.sent).resultCode?n(S(e)):console.log("somesing wrong, status didn't change. response -  ".concat(JSON.stringify(a.messages)));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},updateUserProfile:function(e){return function(){var t=Object(c.a)(o.a.mark((function t(n,a){var r,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a().auth.userId,t.next=3,h(e);case 3:if(0!==(c=t.sent).resultCode){t.next=8;break}n(k(r)),t.next=10;break;case 8:return n(Object(y.a)("profileDataForm",{_error:"".concat(c.messages[0])})),t.abrupt("return",Promise.reject(c.messages[0]));case 10:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},saveFoto:function(e){return function(){var t=Object(c.a)(o.a.mark((function t(n){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O(e);case 2:0===(a=t.sent).resultCode?n({type:"SAVE_PHOTO_SUCCSESS",photos:a.data.photos}):console.log("somesing wrong, ava didn't change. response -  ".concat(JSON.stringify(a.messages)));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),Re.f,$e)(qt),Yt=n(71),Zt=n.n(Yt),Kt=function(e){return me.a.createElement("header",{className:Zt.a.header},me.a.createElement("img",{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRW1qL2UGNRENFDzCrqI2f-4w8JJUdbXTUYucNacGlqZEPpbTzR",alt:"logo"}),me.a.createElement("div",{className:Zt.a.loginBlock},e.isAuth?me.a.createElement("div",null,me.a.createElement(he.b,{to:"/profile/".concat(e.id)},me.a.createElement("span",{className:Zt.a.userName},e.userName)),me.a.createElement("button",{onClick:e.logOut},"Log Out")):me.a.createElement(he.b,{to:"/login"},"Login")))},Xt=function(e){function t(){return Object(de.a)(this,t),Object(ve.a)(this,Object(be.a)(t).apply(this,arguments))}return Object(Ee.a)(t,e),Object(ge.a)(t,[{key:"render",value:function(){return me.a.createElement(Kt,this.props)}}]),t}(me.a.Component),Qt=Object(Fe.b)((function(e){return{isAuth:e.auth.isAuth,userName:e.auth.userName,id:e.auth.id}}),{logOut:$})(Xt),$t=Object(Ge.a)({form:"logIn"})((function(e){var t=e.handleSubmit,n=e.error,a=e.captchaURL;return me.a.createElement("form",{onSubmit:t},me.a.createElement("div",null,me.a.createElement(ze.a,{placeholder:"email",name:"email",component:qe,type:"text",validate:[Ve]})),me.a.createElement("div",null,me.a.createElement(ze.a,{placeholder:"password",name:"password",component:qe,type:"text",validate:[Ve]})),me.a.createElement("div",null,me.a.createElement(ze.a,{name:"rememberMe",component:qe,type:"checkbox"})," Remember Me"),n?me.a.createElement("div",{className:Je.a.formError},me.a.createElement("span",null,n)):"",a?me.a.createElement("div",null,me.a.createElement("img",{src:a,alt:"Captcha"}),me.a.createElement(ze.a,{placeholder:"Input text from image",name:"captcha",component:qe,type:"text",validate:[Ve]})):"",me.a.createElement("button",{type:"submit"},"Sign In"))})),en=function(e){var t=e.logIn,n=e.isAuth,a=e.id,r=e.captchaURL;return n?me.a.createElement(Re.a,{to:"/profile/".concat(a)}):me.a.createElement("div",null,me.a.createElement("h1",null,"Login"),me.a.createElement($t,{onSubmit:function(e){t(e)},captchaURL:r}))},tn=Object(a.d)(Object(Fe.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login,id:e.auth.id,captchaURL:e.auth.captchaURL}}),{logIn:function(e){return function(){var t=Object(c.a)(o.a.mark((function t(n){var a,r,i,s,l,u,m,p;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=Y({},e),r=a.email,i=a.password,s=a.rememberMe,l=void 0!==s&&s,u=a.captcha,m=void 0===u?null:u,t.next=3,f(r,i,l,m);case 3:0===(p=t.sent).resultCode?n(Q()):(10===p.resultCode&&n(function(){var e=Object(c.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g();case 2:n=e.sent,a=n.url,t(X(a));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n(Object(y.a)("logIn",{_error:"".concat(p.messages[0])})));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},logOut:$}))(en),nn=n(140),an=function(e){function t(){return Object(de.a)(this,t),Object(ve.a)(this,Object(be.a)(t).apply(this,arguments))}return Object(Ee.a)(t,e),Object(ge.a)(t,[{key:"componentDidMount",value:function(){this.props.initializeApp()}},{key:"render",value:function(){return this.props.initialized?me.a.createElement("div",{className:"app-wrapper"},me.a.createElement(Qt,null),me.a.createElement(Ue,null),me.a.createElement("div",{className:"app-wrapper-content"},me.a.createElement(Re.b,{path:"/login",render:function(){return me.a.createElement(tn,null)}}),me.a.createElement(Re.b,{path:"/profile/:userId?",render:function(){return me.a.createElement(Vt,null)}}),me.a.createElement(Re.b,{path:"/dialogs",render:function(){return me.a.createElement(et,null)}}),me.a.createElement(Re.b,{path:"/users",render:function(){return me.a.createElement(_t,null)}}),me.a.createElement(Re.b,{path:"/music",component:tt}),me.a.createElement(Re.b,{path:"/news",component:nt}),me.a.createElement(Re.b,{path:"/settings",component:at}))):me.a.createElement(st,null)}}]),t}(me.a.Component),rn=Object(nn.a)(Re.f,Object(Fe.b)((function(e){return{initialized:e.appState.initialized}}),{initializeApp:function(){return function(e){e(Q()).then((function(){e({type:"INITIALIZED_SUCSESS"})}))}}}))(an);fe.a.render(me.a.createElement(he.a,null,me.a.createElement(Fe.a,{store:le},me.a.createElement(rn,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},36:function(e,t,n){e.exports={dialogs:"Dialogs_dialogs__1S21S",dialogsList:"Dialogs_dialogsList__1YeBm",DialogsHeader:"Dialogs_DialogsHeader__2WNM5",messages:"Dialogs_messages__dqca3"}},67:function(e,t,n){e.exports={navbarFriends:"NavbarFriends_navbarFriends__3BNP3",navbarFriendsHeader:"NavbarFriends_navbarFriendsHeader__1s5rw",navbarFriendsList:"NavbarFriends_navbarFriendsList__1MtAV"}},68:function(e,t,n){e.exports={item:"DialogItem_item__3x3Pv",active:"DialogItem_active__1Vp0j",dialogItemAva:"DialogItem_dialogItemAva__1KNmp"}},71:function(e,t,n){e.exports={header:"Header_header__1JFua",loginBlock:"Header_loginBlock__40PZF",userName:"Header_userName__1By2b"}},89:function(e,t,n){e.exports={navbarFriendAva:"NavbarFriendItem_navbarFriendAva__3V76-"}},93:function(e,t,n){e.exports={currentPage:"Pagination_currentPage__1W46q",paginationIem:"Pagination_paginationIem__10a1-"}},94:function(e,t,n){e.exports={myPosts:"MyPosts_myPosts__1Dm4o",posts:"MyPosts_posts__1OWwY"}}},[[167,1,2]]]);
//# sourceMappingURL=main.b424645f.chunk.js.map